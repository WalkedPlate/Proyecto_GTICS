<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

    <head>
        <meta charset="UTF-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>Registro</title>
        <link rel="icon" href="/img/Login/icono.png"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
              crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <link rel="stylesheet" href="/css/Login/registro.css"/>

    </head>

    <body>
        <main>
            <div class="container">
                <div class="row">
                    <div class="logo">
                        <img src="/img/Login/icono.png" alt="renacer"/>
                        <div>
                            <p>Clínica</p>
                            <h1>Renacer</h1>
                        </div>
                    </div>
                </div>

                <div class="row text-center mb-3">
                    <h2>Crea una cuenta</h2>
                </div>

                <div class="row">
                    <div class="col columna">
                        <div th:if="${err != null}" style="color: red" role="alert" class="mb-3">
                            <ul>
                                <li th:each="error : ${err}" th:text="${error}"></li>
                            </ul>
                        </div>

                        <div th:if="${msg != null}" th:text="${msg}" style="color: green" role="alert"
                             class="mb-3"></div>
                    </div>
                </div>

                <div class="row ">
                    <div class="col">
                        <form method="post" th:action="@{/guardarPaciente}"  id="registerForm" novalidate>
                            <div class="row justify-content-center">
                                <div class="col columna">
                                    <div class="form-floating mb-3">
                                        <input id="dni" minlength="8" maxlength="8" type="text" class="form-control"
                                               placeholder="DNI" autocomplete="off" name="dni"/>
                                        <label>DNI</label>
                                        <div class="invalid-feedback" id="dniError">
                                            Por favor, ingrese su DNI de 8 dígitos.
                                        </div>
                                        <div th:if="${errDNI != null}" th:text="${errDNI}" style="color: red" role="alert"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Nombre y apellidos autocompletados-->
                            <div class="row justify-content-center">
                                <div class="col-md-6 columna">
                                    <div class="form-floating mb-3">
                                        <input type="text" class="form-control" placeholder="Nombre" autocomplete="off"
                                               id="nombre" disabled readonly/>
                                        <label>Nombres</label>
                                    </div>
                                </div>
                                <div class="col-md-6 columna">
                                    <div class="form-floating mb-3">
                                        <input type="text" class="form-control" placeholder="Apellido"
                                               autocomplete="off" id="apellido" disabled readonly/>
                                        <label>Apellidos</label>
                                    </div>
                                </div>
                            </div>

                            <div class="row justify-content-center">
                                <div class="col-md-6 columna">
                                    <div class="form-floating mb-3">
                                        <input maxlength="99" type="text" class="form-control" placeholder="Dirección"
                                               autocomplete="off" name="direccion"/>
                                        <label>Dirección</label>
                                        <div class="invalid-feedback" id="direccionError"></div>
                                    </div>
                                </div>
                                <div class="col-md-6 columna">
                                    <div class="mb-3">
                                        <div class="dropdown-center">
                                            <button class="btn dropdown-toggle dttobtn" type="button"
                                                    id="dropdownMenuButton" data-bs-toggle="dropdown"
                                                    aria-expanded="false">
                                                Dtto. de residencia
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" th:each="distrito:${listaDistritos}"
                                                       th:value="${distrito.nombre}" th:text="${distrito.nombre}"></a>
                                                </li>
                                            </ul>
                                            <!-- Hidden input para enviar el valor seleccionado -->
                                            <input type="hidden" class="form-control" id="distritoResidencia"
                                                   name="distritoResidencia">
                                            <div class="invalid-feedback" id="distritoError"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row justify-content-center">
                                <div class="col columna">
                                    <div class="form-floating mb-3">
                                        <input type="email" class="form-control" placeholder="Correo electrónico"
                                               autocomplete="off" name="correo" required/>
                                        <label>Correo electrónico</label>
                                        <div class="invalid-feedback" id="correoError"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="row justify-content-center">
                                <div class="col columna">
                                    <div class="form-control mb-3 seguro-container">
                                        <p>¿Cuenta con seguro en la clínica Renacer?</p>
                                        <div>
                                            <input class="form-check-input" type="radio" name="seguro" value="si"
                                                   required>
                                            <label class="form-check-label">Sí</label>
                                            <input class="form-check-input" type="radio" name="seguro" value="no"
                                                   required>
                                            <label class="form-check-label"> No</label>
                                        </div>
                                        <div class="invalid-feedback" id="seguroError"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="row mt-2 justify-content-center">
                                <input type="submit" value="Registrar" class="sign-btn">
                            </div>
                            <div class="row inicio">
                                <h6>¿Ya tienes una cuenta?</h6>
                                <a th:href="@{'/login'}">Entrar</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </main>

        <script src="/js/Login/registro.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
                crossorigin="anonymous"></script>
    </body>

</html>
